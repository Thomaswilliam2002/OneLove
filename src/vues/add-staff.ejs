<!DOCTYPE html>
<html lang="en">

  
<!-- Mirrored from buybootstrap.com/demos/medflex/medflex-admin-dashboard/add-staff.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 May 2025 12:16:13 GMT -->
<%- include('head')%>

  <body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

      <!-- App header starts -->
      <% if(indice || indice === 'admin'){%>
        <%- include('header')%>
      <% } %>
      <!-- App header ends -->

      <!-- Main container starts -->
      <div class="<%= indice === 'admin' ? 'main-container' : 'container' %>">

        <!-- Sidebar wrapper starts -->
        <% if(indice || indice === 'admin'){%>
          <%- include('menu')%>
        <% } %>
        <!-- Sidebar wrapper ends -->

        <!-- App container starts -->
        <div class="app-container">

          <!-- App hero header starts -->
          <% if(indice || indice === 'admin'){ %>
            <div class="app-hero-header d-flex align-items-center">

              <!-- Breadcrumb starts -->
              <ol class="breadcrumb">
                <li class="breadcrumb-item">
                  <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                  <a href="index.html">Accueil</a>
                </li>
                <li class="breadcrumb-item text-primary" aria-current="page">
                  Ajouter un personnel
                </li>
              </ol>
              <!-- Breadcrumb ends -->

              <!-- Sales stats starts -->
              
              <!-- Sales stats ends -->

            </div>
          <% } %>
          <!-- App Hero header ends -->

          <!-- App body starts -->
          <div class="app-body">
            <% if(msg) {%>
              <% if(msg === 'ajout') {%>
                <div class="alert bg-white border alert-dismissible fade show text-success" role="alert">
                  <b>Personnel </b> ajouter avec succes !
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              <% } else { %>
                <div class="alert bg-white border alert-dismissible fade show text-success" role="alert">
                  <%= msg%>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            <% }}%>
            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card">
                  <% if(indice || indice === 'admin'){ %>
                    <div class="card-header">
                      <h5 class="card-title">Ajouter un Personnel</h5>
                    </div>
                  <% }else{ %>
                    <div class="card-header">
                      <h5 class="card-title">Formulaire d'Inscription</h5>
                    </div>
                  <% } %>
                  <div class="card-body">
                    <form  method="post">
                      <!-- Row starts -->
                      <div class="row gx-3">
                        <% if(indice || indice === 'admin'){ %>
                          <div class="col-sm-12">
                            <div class="bg-light rounded-2 px-3 py-2 mb-3">
                              <h6 class="m-0">Details du personnel</h6>
                            </div>
                          </div>
                          <% } %>
                        <div id="msg" class="alert bg-white border alert-dismissible fade show text-danger" role="alert" style="display: none;"></div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a1">Nom <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="a1" placeholder="Entrer le nom" name="nom" required>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a2">Prenom <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="a2" placeholder="Entrer le prenom" name="prenom" required>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a2">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="a2" placeholder="Enter un email valide" name="email" required>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a3">Numero de Telephone<span class="text-danger">*</span></label>
                            <input type="tel" class="form-control" id="a3" placeholder="Enter un numero Mobile" name="numero" required>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="selectGender1">Genre <span
                                class="text-danger">*</span></label>
                            <div class="m-0">
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="selectGenderOptions" id="selectGender1"
                                  value="homme" required>
                                <label class="form-check-label" for="selectGender1">Homme</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="selectGenderOptions" id="selectGender2"
                                  value="femme">
                                <label class="form-check-label" for="selectGender2">Femme</label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a4">age<span class="text-danger">*</span></label>
                            <input type="number" min="18" class="form-control" id="a4" placeholder="Entrer l'age" name="age" required>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a5">Qualification <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="a5" placeholder="Enter la Qualification" name="qualification">
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a5">Poste occuper <span class="text-danger">*</span></label>
                            <!-- <input type="text" class="form-control" id="a5" placeholder="Entrer le post occuper" name="poste" required> -->
                            <select class="form-select" id="poste" name="poste">
                              <% if(postes){ postes.forEach(poste => { if(poste.nom_poste !== 'Admin'){ %>
                                    <option value="<%= poste.id_poste %>" ><%= poste.nom_poste %></option>
                              <% } }) }else if (!postes || postes.length === 0){ %>
                                <option value="null">Aucun poste disponinble</option>
                              <% } %>
                            </select>
                          </div>
                        </div>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a5">Période salarial<span class="text-danger">*</span></label>
                            <select class="form-select" id="poste" name="periode">
                              <option value="Journalier">Journalier</option>
                              <option value="Hebdomadaire">Hebdomadaire</option>
                              <option value="Quinzaine">Quinzaine</option>
                              <option value="Mensuel">Mensuel</option>
                            </select>
                          </div>
                        </div>
                        <% if(!indice || indice !== 'admin'){ %>
                          <div class="col-xxl-3 col-lg-4 col-sm-6">
                            <div class="mb-3">
                              <label class="form-label" for="a7">Mot de passe <span class="text-danger">*</span></label>
                              <input type="password"  class="form-control" id="Pwd" placeholder="Cree un mot de passe" required name="mdp">
                            </div>
                          </div>
                          <div class="col-xxl-3 col-lg-4 col-sm-6">
                            <div class="mb-3">
                              <label class="form-label" for="a7">Confirmer le mot de passe <span class="text-danger">*</span></label>
                              <input type="password"  class="form-control" id="confPwd" placeholder="Cree un mot de passe" required>
                            </div>
                          </div>
                        <% }else{ %>
                          <div class="col-xxl-3 col-lg-4 col-sm-6" style="visibility: hidden;">
                            <div class="mb-3">
                              <label class="form-label" for="a7">Mot de passe <span class="text-danger">*</span></label>
                              <input type="password"  class="form-control" id="Pwd" placeholder="Cree un mot de passe" value="admin" required name="mdp">
                            </div>
                          </div>
                        <% } %>
                        <div class="col-xxl-3 col-lg-4 col-sm-6">
                          <div class="mb-3">
                            <label class="form-label" for="a7">Adresse<span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="a7" placeholder="Ajouter une Description" name="adresse">
                          </div>
                        </div>
                        <div class="col-sm-12">
                          <div class="mb-3">
                            <label class="form-label" for="a8">Description<span class="text-danger">*</span></label>
                            <textarea class="form-control" id="a8" placeholder="Enter Address" rows="2" name="desc"></textarea>
                          </div>
                        </div>
                        
                        <div class="col-sm-12">
                            <div class="d-flex gap-2 justify-content-end">
                              <button type="submit" class="btn btn-primary">Ajouter</button>
                            </div>
                        </div>
                      </div>
                      <!-- Row ends -->
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <!-- Row ends -->

            <div class="col-sm-4" style="position: relative; left: -1000px;top: -1000px;">
              <!-- Card starts -->
              <div class="card mb-3">
                <div class="card-body">
                  <!-- Button trigger modal -->
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                    data-bs-target="#exampleModalCenter" id="btnpost">
                    Vertically centered modal
                  </button>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalCenter" tabindex="-1"
                    aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title text-danger" id="exampleModalCenterTitle">
                            <b>Attention</b>
                          </h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <p>Attention,vous essayer d'ajouter un employer qui n'occupe aucun poste. Ce message peux survenir si aucun poste n'a 
                            été ajouter et donc qu'aucun poste n'apparait dans la liste déroulante du champs correspondant dans le formulaire. </p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            Fermer
                          </button>
                          <a href="/allPoste#formAddPoste" class="btn btn-warning"
                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Modifier">
                            Ajouder des postes
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Card ends -->
            </div>

            <!-- ----------------------------------------------------------------------------- -->

            <div class="col-sm-4" style="position: relative; left: -1000px;top: -800px;">
              <!-- Card starts -->
              <div class="card mb-3">
                <div class="card-body">
                  <!-- Button trigger modal -->
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                    data-bs-target="#1exampleModalCenter" id="btnpb">
                    Vertically centered modal
                  </button>
                  <!-- Modal -->
                  <div class="modal fade" id="1exampleModalCenter" tabindex="-1"
                    aria-labelledby="1exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title text-danger" id="1exampleModalCenterTitle">
                            <b>Attention</b>
                          </h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <p>Une erreur ces s'est produite. Veillez contacter One Love si le probleme persiste</p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            OK
                          </button>
                          <!-- <a href="/allPoste#formAddPoste" class="btn btn-warning"
                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Modifier">
                            Ajouder des postes
                          </a> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Card ends -->
            </div>

          </div>
          <!-- App body ends -->

          <!-- App footer starts -->
          
          <!-- App footer ends -->
          <!-- App footer starts -->
          <div class="app-footer bg-white">
            <span>© OneLove admin 2026</span>
          </div>
          <!-- App footer ends -->
        </div>
        <!-- App container ends -->

      </div>
      <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- *************
			************ JavaScript Files *************
		************* -->
    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <%- include('script')%>
  </body>
  <script>
    window.addEventListener("pageshow", function (event) {
      var historyTraversal = event.persisted || 
                              (typeof window.performance != "undefined" && 
                              window.performance.navigation.type === 2);
      if (historyTraversal) {
          // Si l'utilisateur est revenu en arrière, on recharge la page proprement
          window.location.reload();
      }
    });
    let sender = "<%= indice %>"
    //alert(sender)
    let pwd = document.getElementById("Pwd");
    let confPwd = document.getElementById("confPwd");
    const msg = document.getElementById('msg');
    const f =document.querySelector('form')
    const poste = document.getElementById('poste');
    const info = document.getElementById('btnpost');
    const pb = document.getElementById('btnpb');
    f.addEventListener('submit', (e) => {
      if(!poste.value || poste.value === ''){
        e.preventDefault()
        if(sender === 'admin'){ 
          info.click();
        }else{
          pb.click();
        }
        
      }
      if(sender === 'admin'){
          f.action="/addPersonnel?sender=admin"
      }else if(!sender || sender === ''){
        if(pwd.value !== confPwd.value){
          e.preventDefault()
          msg.innerHTML = '<p>Les <b>nouveau mot de pass </b>ne sont pas identique !</p>'
          msg.style.display = "block";
        }else if(pwd.value.length < 8 ){
          e.preventDefault()
          msg.innerHTML = '<p>Le mot de pass doit faire au moins 8 caractere</p>'
          msg.style.display = "block";
        }else{
          f.action="/addPersonnel?sender=staff"
        }
      }
    })

    function depe(){
      // console.log("ok")
      // alert(poste.value)
      if(poste.value === '3'){
        document.getElementById('dep').style.display = 'block'
      }else{
        document.getElementById('dep').style.display = 'none'
      }
    }
  </script>

<!-- Mirrored from buybootstrap.com/demos/medflex/medflex-admin-dashboard/add-staff.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 May 2025 12:16:13 GMT -->
</html>