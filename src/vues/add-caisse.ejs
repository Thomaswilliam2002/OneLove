<!DOCTYPE html>
<html lang="en">

  
<!-- Mirrored from buybootstrap.com/demos/medflex/medflex-admin-dashboard/add-staff.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 May 2025 12:16:13 GMT -->
<%- include('head')%>

  <body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

      <!-- App header starts -->
      <% if(user.Personnel.type_personnel === 'admin'){%>
        <%- include('header')%>
      <% }else{%>
        <%- include('header-staff')%>
      <% }%>
      <!-- App header ends -->

      <!-- Main container starts -->
      <div class="main-container">

        <!-- Sidebar wrapper starts -->
        <% if(user.Personnel.type_personnel === 'admin'){%>
          <%- include('menu')%>
        <% }else{%>
          <%- include('menu-staff')%>
        <% }%>
        <!-- Sidebar wrapper ends -->

        <!-- App container starts -->
        <div class="app-container">

          <!-- App hero header starts -->
          <div class="app-hero-header d-flex align-items-center">

            <!-- Breadcrumb starts -->
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                <a href="/index">Accueil</a>
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Ajouter une Nouvelle Caisse
              </li>
            </ol>
            <!-- Breadcrumb ends -->

            <!-- Sales stats starts -->
            
            <!-- Sales stats ends -->

          </div>
          <!-- App Hero header ends -->

          <!-- App body starts -->
          <div class="app-body">

            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card">
                  <div class="card-header">
                    <h5 class="card-title">Ajouter une Caisse</h5>
                  </div>
                  <div class="card-body">
                    <form action="/addCaisse" method="post">
                    <!-- Row starts -->
                    <div class="row gx-3">
                      <div class="col-sm-12">
                        <div class="bg-light rounded-2 px-3 py-2 mb-3">
                          <h6 class="m-0">Details de la Caisse</h6>
                        </div>
                      </div>
                      <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="mb-3">
                          <label class="form-label" for="a1">Nom <span class="text-danger">*</span></label>
                          <input type="text" class="form-control" name="nom" id="a1" required>
                        </div>
                      </div>
                      <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="mb-3">
                          <label class="form-label" for="a2">Solde initial <span class="text-danger">*</span></label>
                          <input type="number" min="0" step="0.01" class="form-control" name="solde_init" id="a2" required>
                        </div>
                      </div>
                      <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="mb-3">
                          <label class="form-label" for="a2">Recette initial <span class="text-danger">*</span></label>
                          <input type="number" min="0" step="0.01" class="form-control" name="recette_init" id="a2" required>
                        </div>
                      </div>
                      <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="mb-3">
                          <label class="form-label" for="a2">Depence initial <span class="text-danger">*</span></label>
                          <input type="number" min="0" step="0.01" class="form-control" name="depence_init" id="a2" required>
                        </div>
                      </div>
                      <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="mb-3">
                          <label class="form-label" for="a2">Choisire le Comptable/caissier/gerant <span class="text-danger">*</span></label>
                          <select class="form-select" id="compt" name="comptable">
                            <% if(personnels){ personnels.forEach(personnel => {%>
                                <option value="<%= personnel.Personnel.id_personnel %>"><%= personnel.Personnel.nom %> <%= personnel.Personnel.prenom %> </option>
                            <% })}else{ %>
                              <option value="null">Aucun Comptable disponinble</option>
                            <% } %>
                          </select> 
                        </div>
                      </div>
                      <div class="col-sm-12">
                        <div class="mb-3">
                          <label class="form-label" for="a8">Caisse de :<span class="text-danger">*</span></label>
                          <input list="barClub" id="nom" class="form-control"  placeholder=" Ajouter le nom l'entité ou de la personne qui est destinataire" name="" required>
                          <input type="hidden" class="form-control" id="bc_id" placeholder=" Ajouter le nom l'entité ou de la personne qui est destinataire" name="bc_id" required>
                          <datalist id="barClub">
                            <% if(barSimples){ barSimples.forEach(barSimple => {%>
                              <option value="<%= barSimple.nom %>" data-id="<%= barSimple.id_barSimple %>#<%= barSimple.nom %>#bs" ></option>
                            <% }) }%>
                            <% if(barVips){ barVips.forEach(barVip => {%>
                              <option value="<%= barVip.nom %>" data-id="<%= barVip.id_barVip %>#<%= barVip.nom %>#bv"></option>
                            <% }) } %>
                            <% if(crazycs){ crazycs.forEach(crazyc => {%>
                              <option value="<%= crazyc.nom %>" data-id="<%= crazyc.id_cclub %>#<%= crazyc.nom %>#cc"></option>
                            <% }) } %>
                          </datalist>
                        </div>
                      </div>
                      <div class="col-sm-12">
                        <div class="d-flex gap-2 justify-content-end">
                          <button type="submit" class="btn btn-primary">Ajouter</button>
                      </div>
                    </div>
                    <!-- Row ends -->
                  </form>
                  </div>
                </div>
              </div>
            </div>
            <!-- Row ends -->
            <div class="col-sm-4" style="position: relative; left: -1000px;top: -1000px;">
              <!-- Card starts -->
              <div class="card mb-3">
                <div class="card-body">
                  <!-- Button trigger modal -->
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                    data-bs-target="#exampleModalCenter" id="btnpost">
                    Vertically centered modal
                  </button>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalCenter" tabindex="-1"
                    aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title text-danger" id="exampleModalCenterTitle">
                            <b>Attention</b>
                          </h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <p>Attention,vous essayer d'ajouter une caisse qui n'est géré par aucun comptable ou caissier. Ce message peux survenir si aucun n'employer n'occupe l'un des postes comptable,
                            caissier ou gerant et donc qu'aucun nom n'apparait dans la liste déroulante du champs correspondant dans le formulaire. </p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            Fermer
                          </button>
                          <a href="/formAddPersonnel?indice=admin" class="btn btn-warning"
                            data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Modifier">
                            Ajouder un employer qualifier
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Card ends -->
            </div>
          </div>
          <!-- App body ends -->

          <!-- App footer starts -->
          <div class="app-footer bg-white">
            <span>© OneLove admin 2024</span>
          </div>
          <!-- App footer ends -->

        </div>
        <!-- App container ends -->

      </div>
      <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- *************
			************ JavaScript Files *************
		************* -->
    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <%- include('script')%>
    <script>
      const compt = document.getElementById('compt')
      const info = document.getElementById('btnpost');
      const f = document.querySelector('form');
      f.addEventListener('submit', (e) => {
        if(!compt.value || compt.value === ''){
          e.preventDefault()
          info.click();
        }
      })
    </script>
    <script>
      const nom= document.getElementById("nom");
      const bc_id = document.getElementById("bc_id");
      nom.addEventListener("input", () => {
        const selectOption = Array.from(nom.list.options).find(option => option.value === nom.value);
        if(selectOption){
          bc_id.value = selectOption.getAttribute("data-id")
        }
      })

    </script>
  </body>

<!-- Mirrored from buybootstrap.com/demos/medflex/medflex-admin-dashboard/add-staff.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 May 2025 12:16:13 GMT -->
</html>