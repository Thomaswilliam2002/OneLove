<!DOCTYPE html>
<html lang="en">

  
<!-- Mirrored from buybootstrap.com/demos/medflex/medflex-admin-dashboard/popovers.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 May 2025 12:16:35 GMT -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap Gallery - Medical Admin Templates & Dashboards</title>

    <!-- Meta -->
    <meta name="description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta property="og:title" content="Admin Templates - Dashboard Templates">
    <meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta property="og:type" content="Website">
    <link rel="shortcut icon" href="assets/images/favicon.svg">

    <!-- *************
		************ CSS Files *************
	************* -->
    <link rel="stylesheet" href="assets/fonts/remix/remixicon.css">
    <link rel="stylesheet" href="assets/css/main.min.css">

    <!-- *************
		************ Vendor Css Files *************
	************ -->

    <!-- Scrollbar CSS -->
    <link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css">
  </head>

  <body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

      <!-- App header starts -->
      <div class="app-header d-flex align-items-center">

        <!-- Toggle buttons starts -->
        <div class="d-flex">
          <button class="toggle-sidebar">
            <i class="ri-menu-line"></i>
          </button>
          <button class="pin-sidebar">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <!-- Toggle buttons ends -->

        <!-- App brand starts -->
        <div class="app-brand ms-3">
          <a href="index.html" class="d-lg-block d-none">
            <img src="assets/images/logo.svg" class="logo" alt="Medicare Admin Template">
          </a>
          <a href="index.html" class="d-lg-none d-md-block">
            <img src="assets/images/logo-sm.svg" class="logo" alt="Medicare Admin Template">
          </a>
        </div>
        <!-- App brand ends -->

        <!-- App header actions starts -->
        <div class="header-actions">

          <!-- Search container starts -->
          <div class="search-container d-lg-block d-none mx-3">
            <input type="text" class="form-control" id="searchId" placeholder="Search">
            <i class="ri-search-line"></i>
          </div>
          <!-- Search container ends -->

          <!-- Header actions starts -->
          <div class="d-lg-flex d-none gap-2">

            <!-- Select country dropdown starts -->
            <div class="dropdown">
              <a class="dropdown-toggle header-icon" href="#!" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                <img src="assets/images/flags/1x1/fr.svg" class="header-country-flag" alt="Bootstrap Dashboards">
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-mini">
                <div class="country-container">
                  <a href="index.html" class="py-2">
                    <img src="assets/images/flags/1x1/us.svg" alt="Admin Panel">
                  </a>
                  <a href="index.html" class="py-2">
                    <img src="assets/images/flags/1x1/in.svg" alt="Admin Panels">
                  </a>
                  <a href="index.html" class="py-2">
                    <img src="assets/images/flags/1x1/br.svg" alt="Admin Dashboards">
                  </a>
                  <a href="index.html" class="py-2">
                    <img src="assets/images/flags/1x1/tr.svg" alt="Admin Templatess">
                  </a>
                  <a href="index.html" class="py-2">
                    <img src="assets/images/flags/1x1/gb.svg" alt="Google Admin">
                  </a>
                </div>
              </div>
            </div>
            <!-- Select country dropdown ends -->

            <!-- Notifications dropdown starts -->
            <div class="dropdown">
              <a class="dropdown-toggle header-icon" href="#!" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="ri-list-check-3"></i>
                <span class="count-label warning"></span>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-300">
                <h5 class="fw-semibold px-3 py-2 text-primary">Activity</h5>

                <!-- Scroll starts -->
                <div class="scroll300">

                  <!-- Activity List Starts -->
                  <div class="p-3">
                    <ul class="p-0 activity-list2">
                      <li class="activity-item pb-3 mb-3">
                        <a href="#!">
                          <h5 class="fw-regular">
                            <i class="ri-circle-fill text-danger me-1"></i>
                            Invoices.
                          </h5>
                          <div class="ps-3 ms-2 border-start">
                            <div class="d-flex align-items-center mb-2">
                              <div class="flex-shrink-0">
                                <img src="assets/images/products/1.jpg" class="img-shadow img-3x rounded-1"
                                  alt="Hospital Admin Templates">
                              </div>
                              <div class="flex-grow-1 ms-3">
                                23 invoices have been paid to the MediCare Labs.
                              </div>
                            </div>
                            <p class="m-0 small">10:20AM Today</p>
                          </div>
                        </a>
                      </li>
                      <li class="activity-item pb-3 mb-3">
                        <a href="#!">
                          <h5 class="fw-regular">
                            <i class="ri-circle-fill text-info me-1"></i>
                            Purchased.
                          </h5>
                          <div class="ps-3 ms-2 border-start">
                            <div class="d-flex align-items-center mb-2">
                              <div class="flex-shrink-0">
                                <img src="assets/images/products/2.jpg" class="img-shadow img-3x rounded-1"
                                  alt="Hospital Admin Templates">
                              </div>
                              <div class="flex-grow-1 ms-3">
                                28 new surgical equipments have been purchased.
                              </div>
                            </div>
                            <p class="m-0 small">04:30PM Today</p>
                          </div>
                        </a>
                      </li>
                      <li class="activity-item pb-3 mb-3">
                        <a href="#!">
                          <h5 class="fw-regular">
                            <i class="ri-circle-fill text-success me-1"></i>
                            Appointed.
                          </h5>
                          <div class="ps-3 ms-2 border-start">
                            <div class="d-flex align-items-center mb-2">
                              <div class="flex-shrink-0">
                                <img src="assets/images/products/8.jpg" class="img-shadow img-3x rounded-1"
                                  alt="Hospital Admin Templates">
                              </div>
                              <div class="flex-grow-1 ms-3">
                                36 new doctors and 28 staff members appointed.
                              </div>
                            </div>
                            <p class="m-0 small">06:50PM Today</p>
                          </div>
                        </a>
                      </li>
                      <li class="activity-item">
                        <a href="#!">
                          <h5 class="fw-regular">
                            <i class="ri-circle-fill text-warning me-1"></i>
                            Requested
                          </h5>
                          <div class="ps-3 ms-2 border-start">
                            <div class="d-flex align-items-center mb-2">
                              <div class="flex-shrink-0">
                                <img src="assets/images/products/9.jpg" class="img-shadow img-3x rounded-1"
                                  alt="Hospital Admin Templates">
                              </div>
                              <div class="flex-grow-1 ms-3">
                                Requested for 6 new vehicles for medical emergency. .
                              </div>
                            </div>
                            <p class="m-0 small">08:30PM Today</p>
                          </div>
                        </a>
                      </li>
                    </ul>
                  </div>
                  <!-- Activity List Ends -->

                </div>
                <!-- Scroll ends -->

                <!-- View all button starts -->
                <div class="d-grid m-3">
                  <a href="javascript:void(0)" class="btn btn-primary">View all</a>
                </div>
                <!-- View all button ends -->

              </div>
            </div>
            <!-- Notifications dropdown ends -->

            <!-- Notifications dropdown starts -->
            <div class="dropdown">
              <a class="dropdown-toggle header-icon" href="#!" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="ri-alarm-warning-line"></i>
                <span class="count-label success"></span>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-300">
                <h5 class="fw-semibold px-3 py-2 text-primary">Alerts</h5>

                <!-- Scroll starts -->
                <div class="scroll300">

                  <!-- Alert list starts -->
                  <div class="p-3">
                    <div class="d-flex py-2">
                      <div class="icon-box md bg-info rounded-circle me-3">
                        <span class="fw-bold fs-6 text-white">DS</span>
                      </div>
                      <div class="m-0">
                        <h6 class="mb-1 fw-semibold">Douglass Shaw</h6>
                        <p class="mb-1">
                          Appointed as a new President 2014-2025
                        </p>
                        <p class="small m-0 opacity-50">Today, 07:30pm</p>
                      </div>
                    </div>
                    <div class="d-flex py-2">
                      <div class="icon-box md bg-danger rounded-circle me-3">
                        <span class="fw-bold fs-6 text-white">WG</span>
                      </div>
                      <div class="m-0">
                        <h6 class="mb-1 fw-semibold">Willie Garrison</h6>
                        <p class="mb-1">
                          Congratulate, James for new job.
                        </p>
                        <p class="small m-0 opacity-50">Today, 08:00pm</p>
                      </div>
                    </div>
                    <div class="d-flex py-2">
                      <div class="icon-box md bg-warning rounded-circle me-3">
                        <span class="fw-bold fs-6 text-white">TJ</span>
                      </div>
                      <div class="m-0">
                        <h6 class="mb-1 fw-semibold">Terry Jenkins</h6>
                        <p class="mb-1">
                          Lewis added new doctors training schedule.
                        </p>
                        <p class="small m-0 opacity-50">Today, 09:30pm</p>
                      </div>
                    </div>
                  </div>
                  <!-- Alert list ends -->

                </div>
                <!-- Scroll ends -->

                <!-- View all button starts -->
                <div class="d-grid m-3">
                  <a href="javascript:void(0)" class="btn btn-primary">View all</a>
                </div>
                <!-- View all button ends -->

              </div>
            </div>
            <!-- Notifications dropdown ends -->

            <!-- Messages dropdown starts -->
            <div class="dropdown">
              <a class="dropdown-toggle header-icon" href="#!" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="ri-message-3-line"></i>
                <span class="count-label"></span>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-300">
                <h5 class="fw-semibold px-3 py-2 text-primary">Messages</h5>

                <!-- Scroll starts -->
                <div class="scroll300">

                  <!-- Messages list starts -->
                  <div class="p-3">
                    <div class="d-flex py-2">
                      <img src="assets/images/user3.png" class="img-shadow img-3x me-3 rounded-5"
                        alt="Hospital Admin Templates">
                      <div class="m-0">
                        <h6 class="mb-1 fw-semibold">Nick Gonzalez</h6>
                        <p class="mb-1">
                          Appointed as a new President 2014-2025
                        </p>
                        <p class="small m-0 opacity-50">Today, 07:30pm</p>
                      </div>
                    </div>
                    <div class="d-flex py-2">
                      <img src="assets/images/user1.png" class="img-shadow img-3x me-3 rounded-5"
                        alt="Hospital Admin Templates">
                      <div class="m-0">
                        <h6 class="mb-1 fw-semibold">Clyde Fowler</h6>
                        <p class="mb-1">
                          Congratulate, James for new job.
                        </p>
                        <p class="small m-0 opacity-50">Today, 08:00pm</p>
                      </div>
                    </div>
                    <div class="d-flex py-2">
                      <img src="assets/images/user4.png" class="img-shadow img-3x me-3 rounded-5"
                        alt="Hospital Admin Templates">
                      <div class="m-0">
                        <h6 class="mb-1 fw-semibold">Sophie Michiels</h6>
                        <p class="mb-1">
                          Lewis added new doctors training schedule.
                        </p>
                        <p class="small m-0 opacity-50">Today, 09:30pm</p>
                      </div>
                    </div>
                  </div>
                  <!-- Messages list ends -->

                </div>
                <!-- Scroll ends -->

                <!-- View all button starts -->
                <div class="d-grid m-3">
                  <a href="javascript:void(0)" class="btn btn-primary">View all</a>
                </div>
                <!-- View all button ends -->

              </div>
            </div>
          </div>
          <!-- Header actions ends -->

          <!-- Header user settings starts -->
          <div class="dropdown ms-2">
            <a id="userSettings" class="dropdown-toggle d-flex align-items-center" href="#!" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              <div class="avatar-box">JB<span class="status busy"></span></div>
            </a>
            <div class="dropdown-menu dropdown-menu-end shadow-lg">
              <div class="px-3 py-2">
                <span class="small">Admin</span>
                <h6 class="m-0">James Bruton</h6>
              </div>
              <div class="mx-3 my-2 d-grid">
                <a href="login.html" class="btn btn-danger">Logout</a>
              </div>
            </div>
          </div>
          <!-- Header user settings ends -->

        </div>
        <!-- App header actions ends -->

      </div>
      <!-- App header ends -->

      <!-- Main container starts -->
      <div class="main-container">

        <!-- Sidebar wrapper starts -->
        <nav id="sidebar" class="sidebar-wrapper">

          <!-- Sidebar profile starts -->
          <div class="sidebar-profile">
            <img src="assets/images/user6.png" class="img-shadow img-3x me-3 rounded-5" alt="Hospital Admin Templates">
            <div class="m-0">
              <h5 class="mb-1 profile-name text-nowrap text-truncate">Nick Gonzalez</h5>
              <p class="m-0 small profile-name text-nowrap text-truncate">Dept Admin</p>
            </div>
          </div>
          <!-- Sidebar profile ends -->

          <!-- Sidebar menu starts -->
          <div class="sidebarMenuScroll">
            <ul class="sidebar-menu">
              <li>
                <a href="index.html">
                  <i class="ri-home-6-line"></i>
                  <span class="menu-text">Hospital Dashboard</span>
                </a>
              </li>
              <li>
                <a href="dashboard2.html">
                  <i class="ri-home-smile-2-line"></i>
                  <span class="menu-text">Medical Dashboard</span>
                </a>
              </li>
              <li>
                <a href="dashboard3.html">
                  <i class="ri-home-5-line"></i>
                  <span class="menu-text">Dentist Dashboard</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-stethoscope-line"></i>
                  <span class="menu-text">Doctors</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="doctor-dashboard.html">Doctors Dashboard</a>
                  </li>
                  <li>
                    <a href="doctors-list.html">Doctors List</a>
                  </li>
                  <li>
                    <a href="doctors-cards.html">Doctors Cards</a>
                  </li>
                  <li>
                    <a href="doctors-profile.html">Doctors Profile</a>
                  </li>
                  <li>
                    <a href="add-doctors.html">Add Doctor</a>
                  </li>
                  <li>
                    <a href="edit-doctors.html">Edit Doctor</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-heart-pulse-line"></i>
                  <span class="menu-text">Patients</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="patient-dashboard.html">Patients Dashboard</a>
                  </li>
                  <li>
                    <a href="patients-list.html">Patients List</a>
                  </li>
                  <li>
                    <a href="add-patient.html">Add Patient</a>
                  </li>
                  <li>
                    <a href="edit-patient.html">Edit Patient Details</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-nurse-line"></i>
                  <span class="menu-text">Staff</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="staff.html">Staff List</a>
                  </li>
                  <li>
                    <a href="add-staff.html">Add Staff</a>
                  </li>
                  <li>
                    <a href="edit-staff.html">Edit Staff Details</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-dossier-line"></i>
                  <span class="menu-text">Appointments</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="appointments.html">Appointments</a>
                  </li>
                  <li>
                    <a href="appointments-list.html">Appointments List</a>
                  </li>
                  <li>
                    <a href="book-appointment.html">Book Appointment</a>
                  </li>
                  <li>
                    <a href="edit-appointment.html">Edit Appointment</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-building-2-line"></i>
                  <span class="menu-text">Departments</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="departments-list.html">Departments List</a>
                  </li>
                  <li>
                    <a href="add-department.html">Add Department</a>
                  </li>
                  <li>
                    <a href="edit-department.html">Edit Department</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-secure-payment-line"></i>
                  <span class="menu-text">Accounts</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="income.html">Income</a>
                  </li>
                  <li>
                    <a href="payments.html">Payments</a>
                  </li>
                  <li>
                    <a href="invoices.html">Invoices</a>
                  </li>
                  <li>
                    <a href="invoice-details.html">Invoice Details</a>
                  </li>
                  <li>
                    <a href="create-invoice.html">Create Invoice</a>
                  </li>
                  <li>
                    <a href="expenses.html">Expenses</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-group-2-line"></i>
                  <span class="menu-text">Human Resources</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="hr-approvals.html">HR Approvals</a>
                  </li>
                  <li>
                    <a href="staff-attendance.html">Attendance</a>
                  </li>
                  <li>
                    <a href="staff-leaves.html">Staff Leaves</a>
                  </li>
                  <li>
                    <a href="staff-holidays.html">Holidays</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-money-dollar-circle-line"></i>
                  <span class="menu-text">Salaries</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="salaries.html">Salary List</a>
                  </li>
                  <li>
                    <a href="payslip.html">Payslip</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-hotel-bed-line"></i>
                  <span class="menu-text">Rooms</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="room-statistics.html">Statistics</a>
                  </li>
                  <li>
                    <a href="rooms-allotted.html">Rooms Allotted</a>
                  </li>
                  <li>
                    <a href="rooms-by-dept.html">Rooms By Department</a>
                  </li>
                  <li>
                    <a href="available-rooms.html">Available Rooms</a>
                  </li>
                  <li>
                    <a href="book-room.html">Book Room</a>
                  </li>
                  <li>
                    <a href="add-room.html">Add Room</a>
                  </li>
                  <li>
                    <a href="edit-room.html">Edit Room</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-car-washing-line"></i>
                  <span class="menu-text">Ambulance</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="ambulance-list.html">Ambulance List</a>
                  </li>
                  <li>
                    <a href="add-ambulance.html">Add Ambulance</a>
                  </li>
                  <li>
                    <a href="edit-ambulance.html">Edit Ambulance</a>
                  </li>
                  <li>
                    <a href="ambulance-call-list.html">Ambulance Call List</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="events.html">
                  <i class="ri-calendar-line"></i>
                  <span class="menu-text">Event Management</span>
                </a>
              </li>
              <li>
                <a href="gallery.html">
                  <i class="ri-tent-line"></i>
                  <span class="menu-text">Gallery</span>
                </a>
              </li>
              <li>
                <a href="news.html">
                  <i class="ri-news-line"></i>
                  <span class="menu-text">News & Updates</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-color-filter-line"></i>
                  <span class="menu-text">UI Elements</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="alerts.html">Alerts</a>
                  </li>
                  <li>
                    <a href="avatars.html">Avatars</a>
                  </li>
                  <li>
                    <a href="badges.html">Badges</a>
                  </li>
                  <li>
                    <a href="buttons.html">Buttons</a>
                  </li>
                  <li>
                    <a href="button-groups.html">Button Groups</a>
                  </li>
                  <li>
                    <a href="cards.html">Cards</a>
                  </li>
                  <li>
                    <a href="advanced-cards.html">Advanced Cards</a>
                  </li>
                  <li>
                    <a href="dropdowns.html">Dropdowns</a>
                  </li>
                  <li>
                    <a href="list-items.html">List Items</a>
                  </li>
                  <li>
                    <a href="progress.html">Progress Bars</a>
                  </li>
                  <li>
                    <a href="placeholders.html">Placeholders</a>
                  </li>
                  <li>
                    <a href="spinners.html">Spinners</a>
                  </li>
                </ul>
              </li>
              <li class="treeview active current-page">
                <a href="#!">
                  <i class="ri-notification-badge-line"></i>
                  <span class="menu-text">Jquery Components</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="accordions.html">Accordions</a>
                  </li>
                  <li>
                    <a href="carousel.html">Carousel</a>
                  </li>
                  <li>
                    <a href="modals.html">Modals</a>
                  </li>
                  <li>
                    <a href="popovers.html" class="active-sub">Popovers</a>
                  </li>
                  <li>
                    <a href="tabs.html">Tabs</a>
                  </li>
                  <li>
                    <a href="tooltips.html">Tooltips</a>
                  </li>
                </ul>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-terminal-window-line"></i>
                  <span class="menu-text">Forms</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="form-inputs.html">Form Inputs</a>
                  </li>
                  <li>
                    <a href="form-checkbox-radio.html">Checkbox &amp; Radio</a>
                  </li>
                  <li>
                    <a href="form-file-input.html">File Input</a>
                  </li>
                  <li>
                    <a href="form-validations.html">Validations</a>
                  </li>
                  <li>
                    <a href="date-time-pickers.html">Date Time Pickers</a>
                  </li>
                  <li>
                    <a href="form-masks.html">Input Masks</a>
                  </li>
                  <li>
                    <a href="form-tags.html">Input Tags</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="tables.html">
                  <i class="ri-table-line"></i>
                  <span class="menu-text">Tables</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-bar-chart-line"></i>
                  <span class="menu-text">Graphs</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="apex.html">Apex Graphs</a>
                  </li>
                  <li>
                    <a href="morris.html">Morris Graphs</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="maps.html">
                  <i class="ri-road-map-line"></i>
                  <span class="menu-text">Vector Maps</span>
                </a>
              </li>
              <li>
                <a href="icons.html">
                  <i class="ri-send-plane-2-line"></i>
                  <span class="menu-text">Icons</span>
                </a>
              </li>
              <li>
                <a href="settings.html">
                  <i class="ri-settings-5-line"></i>
                  <span class="menu-text">Account Settings</span>
                </a>
              </li>
              <li>
                <a href="typography.html">
                  <i class="ri-font-size"></i>
                  <span class="menu-text">Typography</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-login-circle-line"></i>
                  <span class="menu-text">Login/Signup</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="login.html">Login</a>
                  </li>
                  <li>
                    <a href="signup.html">Signup</a>
                  </li>
                  <li>
                    <a href="forgot-password.html">Forgot Password</a>
                  </li>
                  <li>
                    <a href="reset-password.html">Reset Password</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="page-not-found.html">
                  <i class="ri-alert-line"></i>
                  <span class="menu-text">Page Not Found</span>
                </a>
              </li>
              <li>
                <a href="maintenance.html">
                  <i class="ri-auction-line"></i>
                  <span class="menu-text">Maintenance</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-dropdown-list"></i>
                  <span class="menu-text">Menu Level</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="#!">Level One Link</a>
                  </li>
                  <li>
                    <a href="#!">
                      Level One Menu
                      <i class="ri-arrow-right-s-line"></i>
                    </a>
                    <ul class="treeview-menu">
                      <li>
                        <a href="#!">Level Two Link</a>
                      </li>
                      <li>
                        <a href="#!">Level Two Menu
                          <i class="ri-arrow-right-s-line"></i>
                        </a>
                        <ul class="treeview-menu">
                          <li>
                            <a href="#!">Level Three Link</a>
                          </li>
                          <li>
                            <a href="#!">Level Three Link</a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#!">Level One Link</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="default.html">
                  <i class="ri-send-plane-line"></i>
                  <span class="menu-text">External Link</span>
                </a>
              </li>
              <li>
                <a href="#!">
                  <i class="ri-exchange-line"></i>
                  <span class="menu-text">Chip</span>
                  <span class="badge bg-primary ms-auto">6</span>
                </a>
              </li>
              <li>
                <a href="#!">
                  <i class="ri-ticket-line"></i>
                  <span class="menu-text">Badge</span>
                  <span class="badge border border-primary text-primary ms-auto">Chip</span>
                </a>
              </li>
              <li>
                <a href="#!" class="disabled">
                  <i class="ri-magic-line"></i>
                  <span class="menu-text">Disabled Link</span>
                </a>
              </li>
            </ul>
          </div>
          <!-- Sidebar menu ends -->

          <!-- Sidebar contact starts -->
          <div class="sidebar-contact">
            <p class="fw-light mb-1 text-nowrap text-truncate">Emergency Contact</p>
            <h5 class="m-0 lh-1 text-nowrap text-truncate">0987654321</h5>
            <i class="ri-phone-line"></i>
          </div>
          <!-- Sidebar contact ends -->

        </nav>
        <!-- Sidebar wrapper ends -->

        <!-- App container starts -->
        <div class="app-container">

          <!-- App hero header starts -->
          <div class="app-hero-header d-flex align-items-center">

            <!-- Breadcrumb starts -->
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                <a href="index.html">Home</a>
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Popovers
              </li>
            </ol>
            <!-- Breadcrumb ends -->

            <!-- Sales stats starts -->
            <div class="ms-auto d-lg-flex d-none flex-row">
              <div class="d-flex flex-row gap-1 day-sorting">
                <button class="btn btn-sm btn-primary">Today</button>
                <button class="btn btn-sm">7d</button>
                <button class="btn btn-sm">2w</button>
                <button class="btn btn-sm">1m</button>
                <button class="btn btn-sm">3m</button>
                <button class="btn btn-sm">6m</button>
                <button class="btn btn-sm">1y</button>
              </div>
            </div>
            <!-- Sales stats ends -->

          </div>
          <!-- App Hero header ends -->

          <!-- App body starts -->
          <div class="app-body">

            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card mb-3">
                  <div class="card-body">
                    <div class="text-center">
                      <button type="button" class="btn btn-primary" data-bs-container="body" data-bs-toggle="popover"
                        data-bs-placement="top" data-bs-content="Top popover">
                        Popover on top
                      </button>
                      <button type="button" class="btn btn-primary" data-bs-container="body" data-bs-toggle="popover"
                        data-bs-placement="right" data-bs-content="Right popover">
                        Popover on right
                      </button>
                      <button type="button" class="btn btn-primary" data-bs-container="body" data-bs-toggle="popover"
                        data-bs-placement="bottom" data-bs-content="Bottom popover">
                        Popover on bottom
                      </button>
                      <button type="button" class="btn btn-primary" data-bs-container="body" data-bs-toggle="popover"
                        data-bs-placement="left" data-bs-content="Left popover">
                        Popover on left
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Row ends -->

            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card mb-3">
                  <div class="card-body">
                    <div class="text-center">
                      <button type="button" class="btn btn-lg btn-primary" data-bs-toggle="popover"
                        data-bs-title="Popover title"
                        data-bs-content="And here's some amazing content. It's very engaging. Right?">
                        Click to toggle popover
                      </button>
                      <a tabindex="0" class="btn btn-lg btn-primary" role="button" data-bs-toggle="popover"
                        data-bs-trigger="focus" data-bs-title="Dismissible popover"
                        data-bs-content="And here's some amazing content. It's very engaging. Right?">Dismissible
                        popover</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Row ends -->

          </div>
          <!-- App body ends -->

          <!-- App footer starts -->
          <div class="app-footer bg-white">
            <span>© Medflex admin 2024</span>
          </div>
          <!-- App footer ends -->

        </div>
        <!-- App container ends -->

      </div>
      <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- *************
			************ JavaScript Files *************
		************* -->
    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/moment.min.js"></script>

    <!-- *************
			************ Vendor Js Files *************
		************* -->

    <!-- Overlay Scroll JS -->
    <script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
    <script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

    <!-- Custom JS files -->
    <script src="assets/js/custom.js"></script>
  </body>


<!-- Mirrored from buybootstrap.com/demos/medflex/medflex-admin-dashboard/popovers.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 May 2025 12:16:35 GMT -->
</html>
<script>
  const personne = "<%= user.Personnel.id_personnel%>"
  let prodid = []
  let prodnom = []
  let recu = 0
  let embid = []
  let embanom = []
  let r = 0
  const base = document.getElementById("base");
  const data = JSON.parse('<%- JSON.stringify(data) %>')
  const histV = JSON.parse('<%- JSON.stringify(hists) %>')
  console.log(data)
  console.log(histV)
  data[0].forEach((caisse, indexCaisse) => {
    base.insertAdjacentHTML('beforeend',`
      <div class="text-center" style="background: " id="${caisse.nom.replace(/\s+/g,"")}">
          <p class="rounded-4" style="background:#79deec"><b style="font-size:25px">${caisse.nom}</b></p>
      </div>
    `)

    
    const box = document.getElementById(`${caisse.nom.replace(/\s+/g,"")}`);
    data[1].forEach((bs, inbs)=> {
      if(data[1].length > 0 && data[3].length > 0 && caisse.caisse_of.split('#')[1] === bs.nom){
        if(!document.getElementById(`${bs.nom}`)){
          box.insertAdjacentHTML('beforeend',`
            <div class="rounded-4 py-2 my-4" style="font-size:18px; background:#5e969c; ">
              <p><b style="text-decoration: underline">${bs.nom}</b></p>
                <div class="d-flex mx-2 my-2 rounded-4 flex-row flex-wrap justify-content-around" style="background:" id="${bs.nom.replace(/\s+/g,"")}">
                </div>
            </div>
          `)
        }
        
        if(caisse.caisse_of.split('#')[0] == bs.id_barSimple && caisse.caisse_of.split('#')[1] === bs.nom){
          const boxc = document.getElementById(bs.nom.replace(/\s+/g,""));

          data[3].forEach((cg, idcg) => {
            if(cg.type === 'produit' && !prodid.includes(cg.id_probal) && cg.receveur === bs.nom){
              prodid.push(cg.id_probal)
            }
            if(cg.type === 'emballage' && !embid.includes(cg.id_probal) && cg.receveur === bs.nom){
              embid.push(cg.id_probal)
            }
          });

          for(let i = 0; i < prodid.length; i++){
            data[3].forEach((cg, idcg) => {
              if(prodid[i] === cg.id_probal && cg.receveur === bs.nom && cg.type === 'produit'){
                recu += cg.quantiter
              }
            });
            data[5].forEach((pd, idpd) => {
              if(prodid[i] === pd.id_produit && !prodnom.includes(pd.nom)){
                prodnom.push(pd.nom)
              }
            });

            histV.forEach((hist, inh) => {
              if(hist.type === 'produit' && hist.nomBarClub === bs.nom && hist.id_caisse === caisse.id_caisse && 
                hist.id_probal === prodid[i]
              ){
                r += hist.quantiter
              }
            })
            console.log(r)
            boxc.insertAdjacentHTML('beforeend',`
                <div class="col-sm-6 col-lg-3" style="padding: 10px; background-color: rgb(166 214 241); 
                  border-radius: 16px; border-style: solid; border-width: 1px; margin: 10px;" id="${bs.nom.replace(/\s+/g,"")}">
                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 10px;">Produit:</b></p>
                      <p>${prodnom[i]}</p>
                  </div>

                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Quantiter Disponible: </b></p>
                      <p>${recu - r}</p>
                  </div>

                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Prix a l'unité: </b></p>
                      <p>${data[3][data[3].length - 1]['prix_unit']}</p>
                  </div>
                  
                  <div>
                      <button type="button" data-bs-toggle="modal"
                          data-bs-target="#${bs.nom.replace(/\s+/g,"")}${i}ModalCenter" class="btn btn-outline-info btn-sm w-50">
                          <i class="">Mise a jour</i>
                      </button>
                      <!-- Modal -->
                      <div class="modal fade" id="${bs.nom.replace(/\s+/g,"")}${i}ModalCenter" tabindex="-1"
                      aria-labelledby="${bs.nom.replace(/\s+/g,"")}${i}ModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="${bs.nom.replace(/\s+/g,"")}${i}ModalCenterTitle">
                                  Mise a jour
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                              <div class="modal-body">
                                  <form action="/addHistCaisse" method="post">
                                      <div class="row gx-3">
                                        <div class="col-sm-12">
                                          <div class="bg-light rounded-2 px-3 py-2 mb-3">
                                            <h6 class="m-0">Caisse: ${caisse.nom} produit: ${prodnom[i]}</h6>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a1">Stock<span class="text-danger">*</span></label>
                                            <input type="number" min="0"  max="" step="0.1" class="form-control" id="a1" value="${recu - r}" placeholder="Stock actuelle" name="stock" required disabled>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Quantiter vendu <span class="text-danger">*</span></label>
                                            <input type="number" min="1" max="${recu - r}" step="0.1" class="form-control" id="a2" placeholder="Quantiter vendu" name="qte" required>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-12 col-sm-12">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Prix a l'unité <span class="text-danger">*</span></label>
                                            <input type="number" min="1" step="0.1" class="form-control" id="a2" placeholder="Prix a l'unité" name="prix" required>
                                          </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="a2" name="type" value="produit">
                                        <input type="hidden" class="form-control" id="a2" name="idpro" value="${prodid[i]}">
                                        <input type="hidden" class="form-control" id="a2" name="caisse" value="${caisse.id_caisse}">
                                        <input type="hidden" class="form-control" id="a2" name="barclub" value="${bs.nom}">
                                        <input type="hidden" class="form-control" id="a2" name="caissier" value="${personne}">
                                        <input type="hidden" class="form-control" id="a2" name="nom" value="${prodnom[i]}">
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                          Annuler
                                        </button>
                                        <button type="submit" class="btn btn-danger">Appliquer les modifications</button>
                                      </div>
                                    </form>
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
                </div>
            `)
            recu = 0
            r=0
          }

          // ---------------------Emballage-------------------------------------

          for(let i = 0; i < embid.length; i++){
            data[3].forEach((cg, idcg) => {
              if(embid[i] === cg.id_probal  && cg.receveur === bs.nom && cg.type === 'emballage'){
                recu += cg.quantiter
              }
            });
            data[6].forEach((em, idem) => {
              if(embid[i] === em.id_emballage && !embanom.includes(em.nom)){
                embanom.push(em.nom)
              }
            });

            histV.forEach((hist, inh) => {
              if(hist.type === 'emballage' && hist.nomBarClub === bs.nom && hist.id_caisse === caisse.id_caisse && 
                hist.id_probal === embid[i]
              ){
                r += hist.quantiter
              }
            })

            boxc.insertAdjacentHTML('beforeend',`
                <div class="col-sm-6 col-lg-3" style="padding: 10px; background-color: rgb(166 214 241); 
                  border-radius: 16px; border-style: solid; border-width: 1px; margin: 10px;" id="${bs.nom.replace(/\s+/g,"")}">
                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 10px;">Emballage:</b></p>
                      <p>${embanom[i]}</p>
                  </div>

                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Quantiter Disponible: </b></p>
                      <p>${recu - r}</p>
                  </div>

                  

                  
                  <div>
                      <button type="button" data-bs-toggle="modal"
                          data-bs-target="#${bs.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenter" class="btn btn-outline-info btn-sm w-50">
                          <i class="">Mise a jour</i>
                      </button>
                      <!-- Modal -->
                      <div class="modal fade" id="${bs.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenter" tabindex="-1"
                      aria-labelledby="${bs.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="${bs.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenterTitle">
                                  Mise a jour
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                              <div class="modal-body">
                                  <form action="/addHistCaisse" method="post">
                                      <div class="row gx-3">
                                        <div class="col-sm-12">
                                          <div class="bg-light rounded-2 px-3 py-2 mb-3">
                                            <h6 class="m-0">Caisse: ${caisse.nom} produit: ${embanom[i]}</h6>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a1">Stock<span class="text-danger">*</span></label>
                                            <input type="number" min="1"  max="" step="0.1" class="form-control" id="a1" value="${recu - r}" placeholder="Stock actuelle" name="stock" required disabled>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Quantiter vendu <span class="text-danger">*</span></label>
                                            <input type="number" min="1" max="${recu - r}" step="0.1" class="form-control" id="a2" placeholder="Quantiter vendu" name="qte" required>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-12 col-sm-12">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Prix a l'unité <span class="text-danger">*</span></label>
                                            <input type="number" min="1" step="0.1" class="form-control" id="a2" placeholder="Prix a l'unité" name="prix" required>
                                          </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="a2" name="type" value="emballage">
                                        <input type="hidden" class="form-control" id="a2" name="idpro" value="${embid[i]}">
                                        <input type="hidden" class="form-control" id="a2" name="caisse" value="${caisse.id_caisse}">
                                        <input type="hidden" class="form-control" id="a2" name="barclub" value="${bs.nom}">
                                        <input type="hidden" class="form-control" id="a2" name="caissier" value="${personne}">
                                        <input type="hidden" class="form-control" id="a2" name="nom" value="${embanom[i]}">
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                          Annuler
                                        </button>
                                        <button type="submit" class="btn btn-danger">Appliquer les modifications</button>
                                      </div>
                                    </form>
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
                </div>
            `)
            recu = 0
            r = 0
          }
          // data[3].forEach((cg, idcg) => {
          //   if(cg.receveur === bs.nom){
          //     boxc.insertAdjacentHTML('beforeend',`
          //       <div class="text-center" id="${idcg}${bs.nom}">
          //           <p style="padding-right: 20px;">okok</p>
          //       </div>
          //     `)
          //   }
          // });
        }
      }
      prodid = []
      prodnom = []
      embid = []
      embanom = []
    })

    // ----------------------------------------------------------------------------------------------------------------
    // console.log(prodid)
      // console.log(prodnom)
      // console.log(embid)
    
    prodid = []
    prodnom = []
    embid = []
    embanom = []
      
    data[2].forEach((bv, inbv)=> {
      const box = document.getElementById(`${caisse.nom.replace(/\s+/g,"")}`);
      if(data[2].length > 0 && data[4].length > 0 && caisse.caisse_of.split('#')[1] === bv.nom){
        if(!document.getElementById(`${bv.nom.replace(/\s+/g,"")}`)){
          box.insertAdjacentHTML('beforeend',`
            <div class="rounded-4 py-2 my-4" style="font-size:18px; background:#5e969c; ">
              <p><b style="text-decoration: underline">${bv.nom}</b></p>
                <div class="d-flex mx-2 my-2 rounded-4 flex-row flex-wrap justify-content-around" style="background:" id="${bv.nom.replace(/\s+/g,"")}">
                </div>
            </div>
          `)
        }
        if(caisse.caisse_of.split('#')[0] == bv.id_barVip && caisse.caisse_of.split('#')[1] === bv.nom){
          const boxc = document.getElementById(bv.nom.replace(/\s+/g,""));
          data[4].forEach((cg, idcg) => {
            if(cg.type === 'produit' && !prodid.includes(cg.id_probal) && cg.receveur === bv.nom){
              prodid.push(cg.id_probal)
            }
            if(cg.type === 'emballage' && !embid.includes(cg.id_probal) && cg.receveur === bv.nom){
              embid.push(cg.id_probal)
            }
          });

          for(let i = 0; i < prodid.length; i++){
            data[4].forEach((cg, idcg) => {
              if(prodid[i] === cg.id_probal){
                recu += cg.quantiter
              }
            });
            data[5].forEach((pd, idpd) => {
              if(prodid[i] === pd.id_produit && !prodnom.includes(pd.nom)){
                prodnom.push(pd.nom)
              }
            });

            histV.forEach((hist, inh) => {
              if(hist.type === 'produit' && hist.nomBarClub === bv.nom && hist.id_caisse === caisse.id_caisse && 
                hist.id_probal === prodid[i]
              ){
                r += hist.quantiter
              }
            })

            boxc.insertAdjacentHTML('beforeend',`
                <div style="display: inline-block;padding: 10px; background-color: rgb(166 214 241); 
                  border-radius: 16px; border-style: solid; border-width: 1px; margin: 10px;" id="${bv.nom.replace(/\s+/g,"")}">
                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 10px;">Produit:</b></p>
                      <p>${prodnom[i]}</p>
                  </div>

                 <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Quantiter Disponible: </b></p>
                      <p>${recu - r}</p>
                  </div>

                  
                  <div>
                      <button type="button" data-bs-toggle="modal"
                          data-bs-target="#${bv.nom.replace(/\s+/g,"")}${i}ModalCenter" class="btn btn-outline-info btn-sm w-50">
                          <i class="">Mise a jour</i>
                      </button>
                      <!-- Modal -->
                      <div class="modal fade" id="${bv.nom.replace(/\s+/g,"")}${i}ModalCenter" tabindex="-1"
                      aria-labelledby="${bv.nom.replace(/\s+/g,"")}${i}ModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="${bv.nom.replace(/\s+/g,"")}${i}ModalCenterTitle">
                                  Mise a jour
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                              <div class="modal-body">
                                  <form action="/addHistCaisse" method="post">
                                      <div class="row gx-3">
                                        <div class="col-sm-12">
                                          <div class="bg-light rounded-2 px-3 py-2 mb-3">
                                            <h6 class="m-0">Caisse: ${caisse.nom} produit: ${prodnom[i]}</h6>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a1">Stock<span class="text-danger">*</span></label>
                                            <input type="number" min="0"  max="" value="${recu - r}" step="0.1" class="form-control" id="a1" placeholder="Stock actuelle" name="stock" required disabled>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Quantiter vendu <span class="text-danger">*</span></label>
                                            <input type="number" min="1" max="${recu - r}" step="0.1" class="form-control" id="a2" placeholder="Quantiter vendu" name="qte" required>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-12 col-sm-12">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Prix a l'unité <span class="text-danger">*</span></label>
                                            <input type="number" min="1" step="0.1" class="form-control" id="a2" placeholder="Prix a l'unité" name="prix" required>
                                          </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="a2" name="type" value="produit">
                                        <input type="hidden" class="form-control" id="a2" name="idpro" value="${prodid[i]}">
                                        <input type="hidden" class="form-control" id="a2" name="caisse" value="${caisse.id_caisse}">
                                        <input type="hidden" class="form-control" id="a2" name="barclub" value="${bv.nom}">
                                        <input type="hidden" class="form-control" id="a2" name="caissier" value="${personne}">
                                        <input type="hidden" class="form-control" id="a2" name="nom" value="${prodnom[i]}">
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                          Annuler
                                        </button>
                                        <button type="submit" class="btn btn-danger">Appliquer les modifications</button>
                                      </div>
                                    </form>
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
                </div>
            `)
            recu = 0
            r = 0
          }

          // ---------------------Emballage VIP-------------------------------------

          for(let i = 0; i < embid.length; i++){
            data[4].forEach((cg, idcg) => {
              if(embid[i] === cg.id_probal  && cg.receveur === bv.nom && cg.type === 'emballage'){
                recu += cg.quantiter
              }
            });
            data[6].forEach((em, idem) => {
              if(embid[i] === em.id_emballage && !embanom.includes(em.nom)){
                embanom.push(em.nom)
              }
            });

            histV.forEach((hist, inh) => {
              if(hist.type === 'emballage' && hist.nomBarClub === bv.nom && hist.id_caisse === caisse.id_caisse && 
                hist.id_probal === embid[i]
              ){
                r += hist.quantiter
              }
            })

            boxc.insertAdjacentHTML('beforeend',`
                <div class="col-sm-6 col-lg-3" style="padding: 10px; background-color: rgb(166 214 241); 
                  border-radius: 16px; border-style: solid; border-width: 1px; margin: 10px;" id="${bv.nom.replace(/\s+/g,"")}">
                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 10px;">Emballage:</b></p>
                      <p>${embanom[i]}</p>
                  </div>

                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Quantiter Disponible: </b></p>
                      <p>${recu - r}</p>
                  </div>

                  
                  <div>
                      <button type="button" data-bs-toggle="modal"
                          data-bs-target="#${bv.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenter" class="btn btn-outline-info btn-sm w-50">
                          <i class="">Mise a jour</i>
                      </button>
                      <!-- Modal -->
                      <div class="modal fade" id="${bv.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenter" tabindex="-1"
                      aria-labelledby="${bv.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="${bv.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenterTitle">
                                  Mise a jour
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                              <div class="modal-body">
                                  <form action="/addHistCaisse" method="post">
                                      <div class="row gx-3">
                                        <div class="col-sm-12">
                                          <div class="bg-light rounded-2 px-3 py-2 mb-3">
                                            <h6 class="m-0">Caisse: ${caisse.nom} produit: ${embanom[i]}</h6>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a1">Stock<span class="text-danger">*</span></label>
                                            <input type="number" min="0"  max="" step="0.1" class="form-control" id="a1" value="${recu - r}" placeholder="Stock actuelle" name="stock" required disabled>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Quantiter vendu <span class="text-danger">*</span></label>
                                            <input type="number" min="1" max="${recu - r}" step="0.1" class="form-control" id="a2" placeholder="Quantiter vendu" name="qte" required>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-12 col-sm-12">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Prix a l'unité <span class="text-danger">*</span></label>
                                            <input type="number" min="1" step="0.1" class="form-control" id="a2" placeholder="Prix a l'unité" name="prix" required>
                                          </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="a2" name="type" value="emballage">
                                        <input type="hidden" class="form-control" id="a2" name="idpro" value="${embid[i]}">
                                        <input type="hidden" class="form-control" id="a2" name="caisse" value="${caisse.id_caisse}">
                                        <input type="hidden" class="form-control" id="a2" name="barclub" value="${bv.nom}">
                                        <input type="hidden" class="form-control" id="a2" name="caissier" value="${personne}">
                                        <input type="hidden" class="form-control" id="a2" name="nom" value="${embanom[i]}">
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                          Annuler
                                        </button>
                                        <button type="submit" class="btn btn-danger">Appliquer les modifications</button>
                                      </div>
                                    </form>
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
                </div>
            `)
            recu = 0
            r = 0
          }
        }
      }
      prodid = []
      prodnom = []
      embid = []
      embanom = []
    })

    prodid = []
    prodnom = []
    embid = []
    embanom = [] 

    // --------------------------------------------------------------------------------------------------------
    
    data[7].forEach((bc, inbc)=> {
      console.log(data[8])
      const box = document.getElementById(`${caisse.nom.replace(/\s+/g,"")}`);
      if(data[7].length > 0 && data[8].length > 0 && caisse.caisse_of.split('#')[1] === bc.nom){
        if(!document.getElementById(`${bc.nom.replace(/\s+/g,"")}`)){
          box.insertAdjacentHTML('beforeend',`
            <div class="rounded-4 py-2 my-4" style="font-size:18px; background:#5e969c; ">
              <p><b style="text-decoration: underline">${bc.nom}</b></p>
                <div class="d-flex mx-2 my-2 rounded-4 flex-row flex-wrap justify-content-around" style="background:" id="${bc.nom.replace(/\s+/g,"")}">
                </div>
            </div>
          `)
        }
        if(caisse.caisse_of.split('#')[0] == bc.id_cclub && caisse.caisse_of.split('#')[1] === bc.nom){
          const boxc = document.getElementById(bc.nom.replace(/\s+/g,""));
          data[8].forEach((cg, idcg) => {
            if(cg.type === 'produit' && !prodid.includes(cg.id_probal) && cg.receveur === bc.nom){
              prodid.push(cg.id_probal)
            }
            if(cg.type === 'emballage' && !embid.includes(cg.id_probal) && cg.receveur === bc.nom){
              embid.push(cg.id_probal)
            }
          });
          

          for(let i = 0; i < prodid.length; i++){
            data[8].forEach((cg, idcg) => {
              if(prodid[i] === cg.id_probal){
                recu += cg.quantiter
              }
            });
            data[5].forEach((pd, idpd) => {
              if(prodid[i] === pd.id_produit && !prodnom.includes(pd.nom)){
                prodnom.push(pd.nom)
              }
            });

            histV.forEach((hist, inh) => {
              if(hist.type === 'produit' && hist.nomBarClub === bc.nom && hist.id_caisse === caisse.id_caisse && 
                hist.id_probal === prodid[i]
              ){
                r += hist.quantiter
              }
            })

            boxc.insertAdjacentHTML('beforeend',`
                <div style="display: inline-block;padding: 10px; background-color: rgb(166 214 241); 
                  border-radius: 16px; border-style: solid; border-width: 1px; margin: 10px;" id="${bc.nom.replace(/\s+/g,"")}">
                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 10px;">Produit:</b></p>
                      <p>${prodnom[i]}</p>
                  </div>

                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Quantiter Disponible: </b></p>
                      <p>${recu - r}</p>
                  </div>

                  
                  <div>
                      <button type="button" data-bs-toggle="modal"
                          data-bs-target="#${bc.nom.replace(/\s+/g,"")}${i}ModalCenter" class="btn btn-outline-info btn-sm w-50">
                          <i class="">Mise a jour</i>
                      </button>
                      <!-- Modal -->
                      <div class="modal fade" id="${bc.nom.replace(/\s+/g,"")}${i}ModalCenter" tabindex="-1"
                      aria-labelledby="${bc.nom.replace(/\s+/g,"")}${i}ModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="${bc.nom.replace(/\s+/g,"")}${i}ModalCenterTitle">
                                  Mise a jour
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                              <div class="modal-body">
                                  <form action="/addHistCaisse" method="post">
                                      <div class="row gx-3">
                                        <div class="col-sm-12">
                                          <div class="bg-light rounded-2 px-3 py-2 mb-3">
                                            <h6 class="m-0">Caisse: ${caisse.nom} produit: ${prodnom[i]}</h6>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a1">Stock<span class="text-danger">*</span></label>
                                            <input type="number" min="0"  max="" value="${recu - r}" step="0.1" class="form-control" id="a1" placeholder="Stock actuelle" name="stock" required disabled>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Quantiter vendu <span class="text-danger">*</span></label>
                                            <input type="number" min="1" max="${recu - r}" step="0.1" class="form-control" id="a2" placeholder="Quantiter vendu" name="qte" required>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-12 col-sm-12">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Prix a l'unité <span class="text-danger">*</span></label>
                                            <input type="number" min="1" step="0.1" class="form-control" id="a2" placeholder="Prix a l'unité" name="prix" required>
                                          </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="a2" name="type" value="produit">
                                        <input type="hidden" class="form-control" id="a2" name="idpro" value="${prodid[i]}">
                                        <input type="hidden" class="form-control" id="a2" name="caisse" value="${caisse.id_caisse}">
                                        <input type="hidden" class="form-control" id="a2" name="barclub" value="${bc.nom}">
                                        <input type="hidden" class="form-control" id="a2" name="caissier" value="${personne}">
                                        <input type="hidden" class="form-control" id="a2" name="nom" value="${prodnom[i]}">
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                          Annuler
                                        </button>
                                        <button type="submit" class="btn btn-danger">Appliquer les modifications</button>
                                      </div>
                                    </form>
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
                </div>
            `)
            recu = 0
            r = 0
          }

          // ---------------------Emballage-------------------------------------

          for(let i = 0; i < embid.length; i++){
            data[8].forEach((cg, idcg) => {
              if(embid[i] === cg.id_probal  && cg.receveur === bc.nom && cg.type === 'emballage'){
                recu += cg.quantiter
              }
            });
            data[6].forEach((em, idem) => {
              if(embid[i] === em.id_emballage && !embanom.includes(em.nom)){
                embanom.push(em.nom)
              }
            });

            histV.forEach((hist, inh) => {
              if(hist.type === 'emballage' && hist.nomBarClub === bc.nom && hist.id_caisse === caisse.id_caisse && 
                hist.id_probal === embid[i]
              ){
                r += hist.quantiter
              }
            })

            boxc.insertAdjacentHTML('beforeend',`
                <div class="col-sm-6 col-lg-3" style="padding: 10px; background-color: rgb(166 214 241); 
                  border-radius: 16px; border-style: solid; border-width: 1px; margin: 10px;" id="${bc.nom.replace(/\s+/g,"")}">
                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 10px;">Emballage:</b></p>
                      <p>${embanom[i]}</p>
                  </div>

                  <div style="display: flex; justify-content: space-between;">
                      <p><b style="padding-right: 20px;">Quantiter Disponible: </b></p>
                      <p>${recu - r}</p>
                  </div>

                  
                  <div>
                      <button type="button" data-bs-toggle="modal"
                          data-bs-target="#${bc.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenter" class="btn btn-outline-info btn-sm w-50">
                          <i class="">Mise a jour</i>
                      </button>
                      <!-- Modal -->
                      <div class="modal fade" id="${bc.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenter" tabindex="-1"
                      aria-labelledby="${bc.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenterTitle" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="${bc.nom.replace(/\s+/g,"")}${i}${'emballage'}ModalCenterTitle">
                                  Mise a jour
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                              <div class="modal-body">
                                  <form action="/addHistCaisse" method="post">
                                      <div class="row gx-3">
                                        <div class="col-sm-12">
                                          <div class="bg-light rounded-2 px-3 py-2 mb-3">
                                            <h6 class="m-0">Caisse: ${caisse.nom} produit: ${embanom[i]}</h6>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a1">Stock<span class="text-danger">*</span></label>
                                            <input type="number" min="0"  max="" step="0.1" class="form-control" id="a1" value="${recu - r}" placeholder="Stock actuelle" name="stock" required disabled>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-6 col-sm-6">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Quantiter vendu <span class="text-danger">*</span></label>
                                            <input type="number" min="1" max="${recu - r}" step="0.1" class="form-control" id="a2" placeholder="Quantiter vendu" name="qte" required>
                                          </div>
                                        </div>
                                        <div class="col-xxl-3 col-lg-12 col-sm-12">
                                          <div class="mb-3">
                                            <label class="form-label" for="a2">Prix a l'unité <span class="text-danger">*</span></label>
                                            <input type="number" min="1" step="0.1" class="form-control" id="a2" placeholder="Prix a l'unité" name="prix" required>
                                          </div>
                                        </div>
                                        <input type="hidden" class="form-control" id="a2" name="type" value="emballage">
                                        <input type="hidden" class="form-control" id="a2" name="idpro" value="${embid[i]}">
                                        <input type="hidden" class="form-control" id="a2" name="caisse" value="${caisse.id_caisse}">
                                        <input type="hidden" class="form-control" id="a2" name="barclub" value="${bc.nom}">
                                        <input type="hidden" class="form-control" id="a2" name="caissier" value="${personne}">
                                        <input type="hidden" class="form-control" id="a2" name="nom" value="${embanom[i]}">
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                          Annuler
                                        </button>
                                        <button type="submit" class="btn btn-danger">Appliquer les modifications</button>
                                      </div>
                                    </form>
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
                </div>
            `)
            recu = 0
            r = 0
          }
        }
      }
      prodid = []
      prodnom = []
      embid = []
      embanom = []
    })
  });

</script>

<% if(msg) {%>
  <% if(msg === 'ajout') {%>
    <div class="alert bg-white border alert-dismissible fade show text-success" role="alert">
      <b>Article </b> mis a jour !
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% }%>
  <% if(msg === 'modif') {%>
    <div class="alert bg-white border alert-dismissible fade show text-info" role="alert">
      <b>Appartement </b> modifier avec succes !
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% }%>
  <% if(msg === 'sup') {%>
    <div class="alert bg-white border alert-dismissible fade show text-danger" role="alert">
      <b>Appartement </b> supprimer avec succes !
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% }%>
<% }%>

<div class="row gx-3">
  <div class="col-sm-12" id="base">
    <%if(data === 'null'){%>
      <div class="alert bg-white border alert-dismissible fade show text-info" role="alert">
        Aucune <b>Caisse </b> n'est associer a votre compte!
      </div>
    <%}%>
  </div>
</div>

// const {CronJob} = require("cron")
const nodemeiler = require('nodemailer')
const fs = require("fs")
const inlineCss = require("inline-css")

// email = async (resive, sujet, msg) => {
//     const transporter = nodemeiler.createTransport({
//         service: "gmail",
//         auth:{
//             user: "w98464103@gmail.com",
//             pass:"98464103william"
//         }
//     })

//     const templateFile = fs.readFileSync("./template/template.html", 'utf-8')

//     const mailOption = {
//         from: "w98464103@gmail.com",
//         to: resive,
//         subject: sujet,
//         text: msg
//     }

//     await transporter.sendMail(mailOption, (e, info) => {
//         if (e) {
//             console.log(e)
//         } else {
//             console.log("Email envoyer avec succes:" + info.response)
//         }
//     })
// }

// const job = new CronJob(
//     cronTime= "* * * * * *",
//     onTick= () => {
//         console.log("ok")
//     },
//     start= false
// )

// job.start()

// // -------------------------------------------------------------------------------------------------

// const nodemailer = require('nodemailer');
// const fs = require("fs");
// // require('dotenv').config(); // À décommenter après installation de dotenv

// const sendEmail = async (receiver, subject, msg) => {
//     try {
//         const transporter = nodemailer.createTransport({
//             service: "gmail",
//             auth: {
//                 // Utilise des variables d'environnement !
//                 user: process.env.EMAIL_USER || "w98464103@gmail.com", 
//                 pass: process.env.EMAIL_PASS || "98464103william" 
//             }
//         });

//         const mailOptions = {
//             from: `"Gestion Stock" <${process.env.EMAIL_USER}>`,
//             to: receiver,
//             subject: subject,
//             text: msg
//             // html: templateFile // Tu as chargé un template, autant l'utiliser ici
//         };

//         const info = await transporter.sendMail(mailOptions);
//         console.log("✅ Email envoyé : " + info.response);
//         return info;

//     } catch (error) {
//         console.error("❌ Erreur lors de l'envoi de l'email :", error);
//     }
// };

// Export pour l'utiliser dans produitCaisse.js
// module.exports = { sendEmail };

const nodemailer = require('nodemailer');
const { CronJob } = require("cron");
const { Produit, HistSortie, HistCaisse } = require('../db/sequelize');

const sendStockAlert = async (emails, message) => {
    // const transporter = nodemailer.createTransport({
    //     service: "gmail",
    //     auth: {
    //         user: "w98464103@gmail.com",
    //         pass: "98464103william" // Utilise un mot de passe d'application Google !
    //     }
    // });

    // Configuration spéciale pour Mailtrap (Test Local)
    const transporter = nodemailer.createTransport({
        host: "sandbox.smtp.mailtrap.io",
        port: 2525,
        auth: {
          user: "5665c3ea8a96ad", // Remplace par ton ID Mailtrap
          pass: "****7adb"  // Remplace par ton PASS Mailtrap
        }
    });

    const mailOptions = {
        from: '"Système One Love" <w98464103@gmail.com>',
        to: emails.join(','), // Envoie à tout le monde d'un coup
        subject: "⚠️ ALERTE : Seuil de stock atteint",
        text: message
    };

    try {
        await transporter.sendMail(mailOptions);
        console.log("✅ Emails d'alerte envoyés.");
    } catch (error) {
        console.error("❌ Erreur email:", error);
    }
};

const admins = ["test-admin@gmail.com"];

// On met '*/10 * * * * *' pour tester toutes les 10 secondes
const stockJob = new CronJob('*/10 * * * * *', async () => {
    console.log("🔍 [TEST] Vérification des seuils...");

    try {
        await sendStockAlert(admins, "⚠️ ALERTE : Seuil de stock atteint");

    } catch (error) {
        console.error("Erreur Cron Test:", error);
    }
}, null, true, 'Africa/Porto-Novo');

// module.exports = stockJob;

module.exports = { sendStockAlert, stockJob };